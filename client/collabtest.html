<html>
  <head>
    <meta charset="utf-8">
    <title>MERE - Collab Zone</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MERE - Collab Zone">


    <script src="scripts/af/aframe@1.2.0.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/easyrtc/easyrtc.js"></script>
    <script src="scripts/af/networked-aframe@0.8.2.min.js"></script>
    <script src="scripts/af/aframe-randomizer-components.min.js"></script>
    <script src="../jsvr/aframe-ui-widgets.js"></script>
    <script src="../jsvr/TubePainter.js"></script>
    <script src="../jsvr/af.components.js"></script>

</head>

<body>
  
    <body>
        <a-scene networked-scene="
          room: dev;
          debug: true;
          adapter: wseasyrtc;
        ">
          <a-assets>
    
            <img id="grid" src="../img/gfx/grid.png" />
            <img id="sky" src="../img/gfx/sky.jpg" />
    
            <!-- Templates -->
    
            <!-- Avatar -->
            <template id="avatar-template">
              <a-entity class="avatar">
                <a-sphere class="head"
                  scale="0.45 0.5 0.4"
                ></a-sphere>
                <a-entity class="face"
                  position="0 0.05 0"
                >
                  <a-sphere class="eye"
                    color="#efefef"
                    position="0.16 0.1 -0.35"
                    scale="0.12 0.12 0.12"
                  >
                    <a-sphere class="pupil"
                      color="#000"
                      position="0 0 -1"
                      scale="0.2 0.2 0.2"
                    ></a-sphere>
                  </a-sphere>
                  <a-sphere class="eye"
                    color="#efefef"
                    position="-0.16 0.1 -0.35"
                    scale="0.12 0.12 0.12"
                  >
                    <a-sphere class="pupil"
                      color="#000"
                      position="0 0 -1"
                      scale="0.2 0.2 0.2"
                    ></a-sphere>
                  </a-sphere>
                </a-entity>
              </a-entity>
            </template>
    
            <!-- /Templates -->
          </a-assets>
    
          <a-entity id="player"
            networked="template:#avatar-template;attachTemplateToLocal:false;"
            camera
            position="0 1.6 0"
            spawn-in-circle="radius:3"
            wasd-controls look-controls
            >
            <a-sphere class="head"
              visible="false"
              random-color
            ></a-sphere>
          </a-entity>
    
          <a-entity position="0 0 0"
            geometry="primitive: plane; width: 10000; height: 10000;" rotation="-90 0 0"
            material="src: #grid; repeat: 10000 10000; transparent: true; metalness:0.6; roughness: 0.4; sphericalEnvMap: #sky;"></a-entity>
    
          <a-entity light="color: #ccccff; intensity: 1; type: ambient;" visible=""></a-entity>
          <a-entity light="color: #ffaaff; intensity: 1.5" position="5 5 5"></a-entity>
    
          <a-sky src="#sky" rotation="0 -90 0"></a-sky>
          <a-entity id="particles" particle-system="preset: snow"></a-entity>
        </a-scene>
    
        
        <script>
          // On mobile remove elements that are resource heavy
          var isMobile = AFRAME.utils.device.isMobile();
    
          if (isMobile) {
            var particles = document.getElementById('particles');
            particles.parentNode.removeChild(particles);
          }
        </script>
    
        <script>
          // Define custom schema for syncing avatar color, set by random-color
          // NAF.schemas.add({
          //   template: '#avatar-template',
          //   components: [
          //     'position',
          //     'rotation',
          //     {
          //       selector: '.head',
          //       component: 'material',
          //       property: 'color'
          //     }
          //   ]
          // });
    
          // Called by Networked-Aframe when connected to server
          function onConnect () {
            console.log("onConnect", new Date());
          }
        </script>
      </body>
</html>