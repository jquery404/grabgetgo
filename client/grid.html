<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>grid</title>
    <style>
        .box{
            border: 1px solid #000;
            width: 20px;
            height: 20px;
        }
        .export{
            position: absolute;
            right: 10px;
            top: 50px;
        }
        .red{ color: #EA3B2E; }
        .gre{ color: #75FB97; }
        .blu{ color: #214CF5; }
        .sky{ color: #489FE1; }
        .orn{ color: #EB5F2B; }
    </style>
</head>
<body>
    <p style="position: absolute; right: 10px;">
        <span class="orn" onclick="colors('orange')">4x1</span>
        <span class="gre" onclick="colors('green')">2x2</span>
        <span class="blu" onclick="colors('blue')">2x1</span>
        <span class="sky" onclick="colors('skyblue')">2x1</span>
        <span class="red" onclick="colors('red')">2x1</span>
        <span class="blu" onclick="colors('blue')">1x1</span>
        <span class="gre" onclick="colors('green')">1x1</span>
        <span class="red" onclick="colors('red')">1x1</span>
        <span class="blu" onclick="colors('blue')">2x1c</span>
    </p>
    <p style="position: absolute; right: 10px; top: 30px;">
        <span onclick="run()">run</span>
    </p>
    <p class="export"></p>

    <img src="https://clarebryden.co.uk/wp-content/uploads/Lego-trial2.jpg" style="width: 300px;">

    <script>
        let currentColor = 'red', w = 20, h = 20;
        for (let i = 0; i < 15; i++) {
            for (let j = 0; j < 30; j++) {
                let left = i*w+'px', top = j*h+'px';
                const boxEl = document.createElement("div");
                boxEl.className = "box";
                boxEl.style.cssText = 'position:absolute;left:'+left+';top:'+top;
                document.body.appendChild(boxEl);
                boxEl.onclick = function (el) {
                    el.target.style.backgroundColor = this.color===el.target.style.backgroundColor? '' : currentColor;
                    this.color = currentColor;
                }
            }
        }

        function colors(params) {
            currentColor= params;
        }

        function run() {
            const boxesEl = document.querySelectorAll(".box");
            let html='';
            boxesEl.forEach(function(el) {
                let id = 0,
                color = el.style.backgroundColor,
                x = el.style.left,
                y = el.style.top,
                h = 0;
                x = x.replace("px", "");
                y = y.replace("px", "");
                
                switch (color) {
                    case 'red': h = 9; break;
                    case 'green': h = 3; break;
                    case 'blue': h = 3; break;
                    case 'skyblue': h = 2; break;
                    case 'orange': h = 1; break;
                    default: h = 0; break;
                }
                html += x/20+','+y/20+','+h+'<br>';
            });
            let p = document.querySelector(".export");
            p.innerHTML = html;
                
        }

    </script>

</body>
</html>